{% extends 'base.html.twig' %}
{% block title %}Accueil ‚Äî Association D√©fense, Justice et Droit pour Tous{% endblock %}

{% block body %}
<section class="hero">
  <img src="{{ asset('assets/img/hero.jpg') }}" alt="Hero" class="hero-img">
  <div class="hero-overlay">
    <h1>Prot√©gez vos droits avec nous, pour une justice √©quitable pour tous</h1>
    <a href="#contact" class="btn btn-primary">Rejoignez-nous</a>
  </div>
</section>

<section class="container intro intro--card">
  <div class="intro-card">
    <span class="overline">Acc√®s simple au droit</span>
    <h2>Bienvenue chez Association D√©fense, Justice et Droit pour Tous</h2>

    <p class="lead">
      Nous sommes une association engag√©e √† d√©fendre les droits de chacun, en offrant des conseils juridiques adapt√©s √† vos besoins.
      Notre mission est de garantir une justice √©quitable pour tous.
    </p>

    <p>
      Chaque proc√©dure ne n√©cessite pas l‚Äôassistance d‚Äôun avocat : nous vous guidons, vous conseillons et vous accompagnons
      tout au long de la proc√©dure.
    </p>

    {# Lien bleu discret ‚Äî ouvre dans un nouvel onglet et propose le t√©l√©chargement #}
    <p class="text-center mt-3">
      <a href="{{ asset('docs/plaquette-association.pdf') }}"
         target="_blank" rel="noopener"
         download="plaquette-association.pdf"
         class="brochure-link">
        üìÑ T√©l√©charger notre brochure (PDF)
      </a>
    </p>

    <div class="intro-actions">
     {% if app.user %}
        {% if hasActiveSubscription %}
        <a class="btn btn-outline is-disabled" aria-disabled="true" tabindex="-1">Abonn√© ‚Äî {{ subscription.currentPeriodEnd ? ('jusqu‚Äôau ' ~ subscription.currentPeriodEnd|date('d/m/Y')) : 'actif' }}</a>
        <a href="{{ path('account') }}" class="btn btn-primary">Mon compte</a>
        
        {% else %}
        <a href="{{ path('account') }}" class="btn btn-primary">Mon compte</a>
        <form method="post" action="{{ path('subscription_checkout') }}" style="display:inline">
            <button class="btn btn-outline">S‚Äôabonner ‚Äî 10,99 ‚Ç¨</button>
        </form>
        {% endif %}
    {% else %}
        <a href="{{ path('app_login') }}" class="btn btn-outline">S‚Äôabonner ‚Äî 10,99 ‚Ç¨</a>
        <small class="hint">Connexion / cr√©ation de compte requise</small>
    {% endif %}
    </div>
  </div>
</section>

<section class="container services">
  <h2>Prestations de service : abonnement mensuel pour seulement 10,99&nbsp;euros</h2>
  <div class="cards">
    <article class="card">
      <img src="{{ asset('assets/img/conseil_assistance.jpg') }}" alt="">
      <h3>Conseils et assistance juridiques personnalis√©s</h3>
      <p>Conseils personnalis√©s : mise en demeure, jugement/ordonnance, acte de saisie, signification, commandements‚Ä¶</p>
    </article>
    <article class="card">
      <img src="{{ asset('assets/img/creation_doc.jpg') }}" alt="">
      <h3>Aide √† la cr√©ation</h3>
      <p>Cr√©ation d‚Äôassociation/entreprise/soci√©t√©, statuts, dissolution, formalit√©s.</p>
    </article>
    <article class="card">
      <img src="{{ asset('assets/img/droit_etranger.jpg') }}" alt="">
      <h3>Mod√®les de lettres & documents juridiques</h3>
      <p>Licenciement, retraite, contestation, bourse, contentieux, etc.</p>
    </article>
    <article class="card">
      <img src="{{ asset('assets/img/mod_lettre.jpg') }}" alt="">
      <h3>Droit des √©trangers</h3>
      <p>Titres de s√©jour, nationalit√©, OQTF, regroupement familial, droits sociaux‚Ä¶</p>
    </article>
  </div>
</section>

{% for label, messages in app.flashes %}
  {% for message in messages %}
    <div class="alert alert-{{ label }}">
      {{ message|raw }}
    </div>
  {% endfor %}
{% endfor %}

<section id="contact" class="container contact-split">
  <div class="contact-copy">
    <span class="overline">Nous √©crire</span>
    <h2>Parlez-nous de votre situation</h2>
    <p class="lead">Expliquez votre contexte en quelques lignes. Nous revenons vers vous avec des premi√®res pistes claires et actionnables.</p>

    <ul class="contact-bullets">
      <li>R√©ponse sous 24‚Äì48 h</li>
      <li>√âchange confidentiel (RGPD)</li>
      <li>Sans engagement</li>
    </ul>

    <div class="trust-badges">
      <span class="badge">Association loi 1901</span>
      <span class="badge">RGPD</span>
      <span class="badge">Transparence</span>
    </div>
  </div>

  <div class="contact-form-card">
    <h3>Contact rapide</h3>

    {% if form is defined %}
      {{ form_start(form, {'attr': {'class': 'contact-form', 'novalidate': 'novalidate'}}) }}
        {{ form_errors(form) }}

        <div class="form-grid">
          <div class="field required {{ form_errors(form.firstname) ? 'has-error' : '' }}">
            {{ form_label(form.firstname, 'Pr√©nom <span class="req">*</span>', {'label_html': true}) }}
            {{ form_widget(form.firstname, { attr: { 'aria-invalid': form_errors(form.firstname) ? 'true' : 'false' } }) }}
            <div class="form-error">{{ form_errors(form.firstname) }}</div>
          </div>
          <div class="field required {{ form_errors(form.lastname) ? 'has-error' : '' }}">
            {{ form_label(form.lastname, 'Nom <span class="req">*</span>', {'label_html': true}) }}
            {{ form_widget(form.lastname, { attr: { 'aria-invalid': form_errors(form.lastname) ? 'true' : 'false' } }) }}
            <div class="form-error">{{ form_errors(form.lastname) }}</div>
          </div>
        </div>

        <div class="field required {{ form_errors(form.email) ? 'has-error' : '' }}">
          {{ form_label(form.email, 'Email <span class="req">*</span>', {'label_html': true}) }}
          {{ form_widget(form.email, { attr: { 'aria-invalid': form_errors(form.email) ? 'true' : 'false' } }) }}
          <div class="form-error">{{ form_errors(form.email) }}</div>
        </div>

        <div class="field {{ form_errors(form.phone) ? 'has-error' : '' }}">
          {{ form_label(form.phone, 'T√©l√©phone') }}
          {{ form_widget(form.phone) }}
          <div class="form-error">{{ form_errors(form.phone) }}</div>
        </div>

        <div class="field required {{ form_errors(form.message) ? 'has-error' : '' }}">
          {{ form_label(form.message, 'Message <span class="req">*</span>', {'label_html': true}) }}
          {{ form_widget(form.message, { attr: { rows: 6, 'aria-invalid': form_errors(form.message) ? 'true' : 'false' } }) }}
          <div class="form-error">{{ form_errors(form.message) }}</div>
        </div>

        <div class="field checkbox required {{ form_errors(form.is_accepted_cgu) ? 'has-error' : '' }}">
          <label>
            {{ form_widget(form.is_accepted_cgu, { attr: { 'aria-invalid': form_errors(form.is_accepted_cgu) ? 'true' : 'false' } }) }}
            J‚Äôaccepte les CGU <span class="req">*</span>
          </label>
          <div class="form-error">{{ form_errors(form.is_accepted_cgu) }}</div>
        </div>

        {% if form.vars.submitted and not form.vars.valid %}
          <p class="form-error-global">Le formulaire contient des erreurs. Veuillez corriger les champs en rouge.</p>
        {% endif %}

        <button type="submit" class="btn btn-primary btn-block">Envoyer</button>
      {{ form_end(form) }}

    {% else %}
      <form class="contact-form" method="post" action="#">
        <div class="form-grid">
          <div class="field required"><label>Pr√©nom <span class="req">*</span></label><input type="text" required></div>
          <div class="field required"><label>Nom <span class="req">*</span></label><input type="text" required></div>
        </div>
        <div class="field required"><label>Email <span class="req">*</span></label><input type="email" required></div>
        <div class="field"><label>T√©l√©phone</label><input type="text"></div>
        <div class="field required"><label>Message <span class="req">*</span></label><textarea rows="5" required></textarea></div>
        <div class="field checkbox required"><label><input type="checkbox" required> J‚Äôaccepte les CGU <span class="req">*</span></label></div>

        <p class="form-error-global d-none">Le formulaire contient des erreurs. Veuillez corriger les champs en rouge.</p>
        <button type="submit" class="btn btn-primary btn-block">Envoyer</button>
      </form>
    {% endif %}
  </div>
</section>

<section id="about" class="about-band">
  <div class="container">
    <h2>Qui sommes nous ?</h2>
    <p>
      Association D√©fense, Justice et Droit pour Tous est engag√©e pour un acc√®s simple et √©quitable au droit.
      Nous simplifions vos d√©marches, proposons des conseils personnalis√©s et un accompagnement structur√© pour des r√©sultats
      clairs et efficaces.
    </p>
  </div>
</section>
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
{% endblock %}
