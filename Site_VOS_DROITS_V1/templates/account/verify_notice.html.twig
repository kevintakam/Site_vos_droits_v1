{% extends 'base.html.twig' %}
{% block title %}Vérifiez votre e-mail{% endblock %}

{% block body %}
  {# Affichage des messages flash #}
  {% for label, messages in app.flashes %}
    {% for message in messages %}
      <div class="alert alert-{{ label }}">{{ message|raw }}</div>
    {% endfor %}
  {% endfor %}

  <div class="card" style="max-width:720px;margin:2rem auto;padding:1.5rem;">
    <h1>Vérification requise</h1>
    <p>
      Nous avons envoyé un e-mail de vérification à votre adresse.
      Cliquez sur le lien pour activer votre compte.
    </p>

    <hr>

    <p class="muted">Vous n’avez rien reçu ? Renvoyez le lien :</p>

    <form method="post" action="{{ path('app_verify_resend') }}" class="row g-2" style="max-width:520px;">
      <div class="mb-2">
        <label for="verify-email" class="form-label">Votre e-mail</label>
        <input
          id="verify-email"
          type="email"
          name="email"
          class="form-control"
          required
          autocomplete="email"
          value="{{ prefill_email is defined and prefill_email ? prefill_email : app.request.get('email') }}"
          placeholder="ex. jean.dupont@email.com"
        >
      </div>
      <div class="mt-2">
        <button type="submit" class="btn btn-outline">Renvoyer l’e-mail de vérification</button>
      </div>
    </form>

    <p class="mt-3">
      <a class="btn btn-primary" href="{{ path('home') }}">Retour à l’accueil</a>
      {# Optionnel : proposer la connexion #}
      <a class="btn btn-link" href="{{ path('app_login') }}">Se connecter</a>
    </p>

    <p class="text-muted" style="margin-top:0.75rem;font-size:0.9rem;">
      Astuce : vérifiez aussi vos dossiers « Spam » / « Promotions  ». Si le lien ne fonctionne pas,
      copiez-collez l’URL complète dans votre navigateur.
    </p>
  </div>
{% endblock %}
